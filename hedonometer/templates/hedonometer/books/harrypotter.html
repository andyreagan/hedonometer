{% extends "hedonometer/base.html" %}
{% load static %}
{% block headercss %}
<link href="{% static "hedonometer/css/bootstrap.css" %}" rel="stylesheet">
<link href="{% static "hedonometer/css/font-awesome.min.css" %}" rel="stylesheet">
<link href="{% static "hedonometer/css/site.css" %}" rel="stylesheet">
<link href="{% static "hedonometer/css/books.css" %}" rel="stylesheet">
<link href="{% static "hedonometer/css/datepicker.css" %}" rel="stylesheet">
<link href="{% static "hedonometer/css/paper.css" %}" rel="stylesheet">
<link href="{% static "hedonometer/css/hedotools.shift.css" %}" rel="stylesheet">
<style>
.hoverinfogroup h5 { 
    margin-top: 0;
    margin-bottom: 0;
}

.hoverinfogroup {
  line-height: 1;
  font-weight: bold;
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  border-radius: 2px;
}
</style>
{% endblock %}

{% block headerjs %}
<!-- variables from Django for the JS to consume -->
<script>
  var book = "{{ book|escapejs }}";
</script>
{% endblock %}

{% block content %}
<div class="container">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 col-md-5">
	<div id="booktitle" class="pullleft"></div>
      </div><!-- col -->
      <div class="col-xs-12 col-md-7">
      </div><!-- col -->


      <div class="col-xs-12 col-md-7">
	<!-- <label class="col-sm-2 input-label">Search:</label> -->
	<h2> 
	  <div class="input-group">
	    <!-- <h4>Search:</h4> -->
	    <!-- <input type="text" class="form-control typeahead" id="wordsearch" placeholder="Moby Dick"> -->
	    <input type="text" class="form-control" id="wordsearch" placeholder="Search Books">
	    <span class="input-group-btn">
	      <!-- Button and dropdown menu -->
	      <!-- <button class="btn btn-default" type="submit" id="showallmatching">Search</button> -->
	      <div class="btn-group">
		<button type="button" class="btn btn-default dropdown-toggle" tabindex="-1" id="searchtype" data-toggle="dropdown">by 
		  <span class="selection">Title</span>
		  <span class="caret"></span>
		  <span class="sr-only">Toggle Dropdown</span>
		</button>
		<ul class="dropdown-menu search">  <!-- dropdown-menu-right  role="menu"-->
		  <li><a href="#">Title</a></li>
		  <li><a href="#">Author</a></li>
		</ul>
	      </div>
	      <div class="btn-group">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" tabindex="-1">
		  Classics
		  <span class="caret"></span>
		  <span class="sr-only">Toggle Dropdown</span>
		</button>
		<ul class="dropdown-menu">
		  <li><a href="/books/Moby%20Dick/">Moby Dick</a></li>
		  <li><a href="/books/Die%20Verwandlung/">Die Verwandlung</a></li>
		  <li><a href="/books/Don%20Quixote/">Don Quixote</a></li>
		  <li><a href="/books/Ulysses/">Ulysses</a></li>
		  <li><a href="/books/The%20Three%20Musketeers/">The Three Musketeers</a></li>
		  <li><a href="/books/Oliver%20Twist/">Oliver Twist</a></li>
		  <li><a href="/books/Crime%20and%20Punishment:%20English%20Translation/">Crime and Punishment: English Translation</a></li>
		  <li><a href="/books/Die%20Verwandlung:%20English%20Translation/">Die Verwandlung: English Translation</a></li>
		  <li><a href="/books/The%20Adventures%20of%20Sherlock%20Holmes/">The Adventures of Sherlock Holmes</a></li>
		  <li><a href="/books/Count%20of%20Monte%20Cristo/">Count of Monte Cristo</a></li>
		  <li><a href="/books/Adventures%20of%20Huckleberry%20Finn/">Adventures of Huckleberry Finn</a></li>
		  <li><a href="/books/Great%20Expectations/">Great Expectations</a></li>
		  <li><a href="/books/Wuthering%20Heights/">Wuthering Heights</a></li>
		  <li><a href="/books/The%20Adventures%20of%20Tom%20Sawyer/">The Adventures of Tom Sawyer</a></li>
		  <li><a href="/books/Pride%20and%20Prejudice/">Pride and Prejudice</a></li>
		  <li><a href="/books/Anna%20Karenina/">Anna Karenina</a></li>
		  <li><a href="/books/Sense%20and%20Sensibility/">Sense and Sensibility</a></li>
		  <li><a href="/books/A%20Tale%20of%20Two%20Cities/">A Tale of Two Cities</a></li>
		  <li><a href="/books/Crime%20and%20Punishment/">Crime and Punishment</a></li>
		  <li><a href="/books/Frankenstein,%20Or%20the%20Modern%20Prometheus/">Frankenstein, Or the Modern Prometheus</a></li>
		  <li><a href="/books/I%20Have%20a%20Dream/">I Have a Dream</a></li>
		  <li><a href="/books/Leaves%20of%20Grass/">Leaves of Grass</a></li>
		  <li><a href="/books/Alice's%20Adventures%20in%20Wonderland/">Alice's Adventures in Wonderland</a></li>
		</ul>
	      </div>
	      <div class="btn-group">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" tabindex="-1">
		  Harry Potter
		  <span class="caret"></span>
		  <span class="sr-only">Toggle Dropdown</span>
		</button>
		<ul class="dropdown-menu">
		  <li><a href="/books/Harry%20Potter%20and%20the%20Sorcerer%27s%20Stone/">Harry Potter and the Sorcerer's Stone</a></li>
		  <li><a href="/books/Harry%20Potter%20and%20the%20Chamber%20of%20Secrets/">Harry Potter and the Chamber of Secrets</a></li>
		  <li><a href="/books/Harry%20Potter%20and%20the%20Prisoner%20of%20Azkaban/">Harry Potter and the Prisoner of Azkaban</a></li>
		  <li><a href="/books/Harry%20Potter%20and%20the%20Goblet%20of%20Fire/">Harry Potter and the Goblet of Fire</a></li>
		  <li><a href="/books/Harry%20Potter%20and%20the%20Order%20of%20the%20Phoenix/">Harry Potter and the Order of the Phoenix</a></li>
		  <li><a href="/books/Harry%20Potter%20and%20the%20Half-Blood%20Prince/">Harry Potter and the Half-Blood Prince</a></li>
		  <li><a href="/books/Harry%20Potter%20and%20the%20Deathly%20Hallows/">Harry Potter and the Deathly Hallows</a></li>
		  <li><a href="/books/Harry%20Potter%20(all%20books%20together)/">Harry Potter (all books together)</a></li>
		</ul>
	      </div>
              <button type="button" class="btn btn-default" tabindex="-1" id="randombook">Random</button>
	    </span>
	  </div>
	</h2>
      </div><!-- col -->
    </div><!-- row -->

    <div class="row">
      <div class="col-xs-12 col-md-6">
	<div id="bookauthor" class="pullleft"></div>
      </div><!-- col -->
    </div><!-- row -->
    <br>
    <div class="row">
    </div><!-- row -->
    <div class="row">
      <div class="col-xs-12">

	<div class="paper">
	  <b>Book happiness time series:</b>
	  <p>Explore the work's emotional dynamics by sliding and resizing the reference and comparison sections.</p>
	  <div id="chapters01" class="figure refslider"></div>
	  <div id="chapters03" class="figure"></div>
	  <div id="chapters02" class="figure compslider"></div>
	</div>

	<div class="paper" id="shiftingPaper">
	  <p><b>Interact with timeseries</b></p>
	  <form role="form">
	    <div class="row">
	      <div class="col-xs-12 col-lg-1">
	      Comparing
	      </div>
	      <div class="col-xs-12 col-lg-2">
	      <div class="input-group restrain" style="width: 165px;">
		<input type="text" class="form-control" value="0%" id="refInput1"  disabled="disabled">
		<span class="input-group-btn">
                  <button class="btn btn-default left" type="button" style="border-radius: 0px; border-right-width: 0px;" disabled="disabled">
                    to
                  </button>
		</span>
		<input type="text" class="form-control" value="20%" id="refInput2" style="border-left-width: 1px;" disabled="disabled">
              </div>
	      </div>
	      <!-- <div class="form-group col-xs-1"> -->
	      <!-- 	<input type="email" class="form-control" id="ref1" placeholder="10%"> -->
	      <!-- 	<input type="email" class="form-control" id="ref2" placeholder="20%"> -->
	      <!-- </div> -->
	      <!-- <div class="col-xs-1"> -->
	      <!-- to -->
	      <!-- </div> -->
	      <!-- <div class="form-group col-xs-1"> -->
	      <!-- 	<input type="email" class="form-control" id="ref2" placeholder="20%"> -->
	      <!-- </div> -->
	      <div class="col-xs-12 col-lg-1">
	      versus reference
	      </div>
	    <!--   <div class="form-group col-xs-1"> -->
	    <!-- 	<input type="email" class="form-control" id="comp1" placeholder="60%"> -->
	    <!--   </div> -->
	    <!--   <div class="col-xs-1"> -->
	    <!--   to -->
	    <!--   </div> -->
	    <!--   <div class="form-group col-xs-1"> -->
	    <!-- 	<input type="email" class="form-control" id="comp2" placeholder="100%"> -->
	    <!--   </div> -->
	      <div class="col-xs-12 col-lg-2">
	      <div class="input-group restrain" style="width: 165px;">
		<input type="text" class="form-control" value="80%" id="compInput1"  disabled="disabled">
		<span class="input-group-btn">
                  <button class="btn btn-default left" type="button" style="border-radius: 0px; border-right-width: 0px;" disabled="disabled" >
                    to
                  </button>
		</span>
		<input type="text" class="form-control" value="100%" id="compInput2" style="border-left-width: 1px;" disabled="disabled">
              </div>
	      </div>
	      <div class="col-xs-12 col-lg-1">
	      of text.
	      </div>
	    </div>
	  </form>
	  <br>
	  <div class="row">
	    <div class="col-xs-12 col-lg-6">
	      <div class="btn-group">
		<button type="button" class="btn btn-default" id="loaddatabutton">Load Shift Data
		  <i class="fa fa-cloud-download"></i>
		</button>
		<button type="button" class="btn btn-default" id="popupbutton" disabled="disabled">Show Shift
		  <i class="fa fa-external-link-square"></i>
		</button>
	      </div>
	    </div>
	    <div class="visible-lg col-lg-6">
	      <div class="btn-group pull-right">
		<button type="button" class="btn btn-default" id="loadalldatabutton">Load All Word Vector Data
		  <i class="fa fa-cloud-download"></i>
		</button>
		<button type="button" class="btn btn-default" id="lensbutton" disabled="disabled">Show Lens
		  <i class="fa fa-external-link-square"></i>
		</button>
	      </div>
	    </div>
	  </div>
	</div>

	<!-- <div class="paper" id="annotationListPaper"> -->
	<!--   <p><b>List of annotations</b></p> -->
	<!-- </div> -->

	<div class="paper" id="annotationPaper">
	  <p><b>Annotate high and low points</b></p>
	  {% if user.is_authenticated %}
	  <div class="row">
	    <div class="col-xs-12">
	      Welcome back, {{ user.username }}!
	      <br>
	      <br>
	    </div><!-- col -->
	    <div class="col-xs-12">
	      <button type="button" class="btn btn-default" id="beginannotationbutton">Begin annotating</button>
	      <!-- put form here -->
	    </div><!-- col -->
	  </div><!-- row -->
	  {% else %}
	  <a href="/twitter/login" id="changeMe"><img src="/static/hedonometer/graphics/sign-in-with-twitter-gray.png" alt="Sign in with Twitter"></a>
	  {% endif %}

	  <div class="row">
	    <div class="col-xs-12">
	      <div id="annotationform">
		<form class="form-horizontal" role="form" method="post" action="/book/samplebook/" id="changeMeAlso">
		  {% csrf_token %}		      
		  <div class="form-group has-error has-feedback" id="selectPoint">
		    <label class="control-label col-sm-3" for="inputSuccess3">Select point on timeseries</label>
		    <div class="col-sm-4">
		      <input type="text" class="form-control" id="inputSuccess3" name="point">
		      <span class="glyphicon glyphicon-remove form-control-feedback" id="selectPointIcon"></span>
		      <span class="help-block">Go click on a flashing point in the timeseries at the top.</span>
		    </div>
		  </div>
		  <p><b>Select a previous annotation to vote for it, or add your own:</b></p>
		  <!-- <div class="form-group"> -->
		  <!--   <div class="col-sm-offset-3 col-sm-7"> -->
		  <!--     <div class="checkbox" id="none"> -->
		  <!-- 	<label> -->
		  <!-- 	  <input type="checkbox" id="none" name="34" value="off">Dumbledore dies (votes: 1) -->
		  <!-- 	</label> -->
		  <!--     </div> -->
		  <!--   </div> -->
		  <!-- </div> -->
		  <div class="form-group has-error has-feedback" id="annotationInput">
		    <label class="control-label col-sm-3" for="inputSuccess4">Describe in 6 words or less</label>
		    <div class="col-sm-6" id="inputSuccess4col">
		      <input type="text" class="form-control" id="inputSuccess4" name="annotation">
		      <span class="glyphicon glyphicon-remove form-control-feedback" id="annotationInputIcon"></span>
		      <span class="help-block">Describe what happens, using at most 6 words from the book itself. We'll check that they're in the book when you press submit.</span>
		      <!-- <span class="glyphicon glyphicon-ok form-control-feedback"></span> -->
		    </div>
		  </div>
		  <div class="form-group">
		    <div class="col-sm-offset-3 col-sm-7">
		      <div class="checkbox" id="tweetCheckDiv">
			<label>
			  <input type="checkbox" id="toTweetOrNotToTweet" name="tweetflag" value="off">Tweet this annotation to @hedonometer from my account.
			</label>
			<!-- <span class="help-block">The tweet would be "@hedonometer: 67% through Harry Potter(all books), ...."</span> -->
		      </div>
		    </div>
		  </div>
		  <div class="form-group">
		    <div class="col-sm-offset-3 col-sm-7">
		      <button type="submit" class="btn btn-default">Submit</button>
		    </div>
		  </div>
		</form>
	      </div>
	    </div>
	  </div>
	</div>
      </div><!-- col -->
    </div><!-- row -->

    <div class="row">
      <div class="col-xs-12 col-sm-6 col-sm-offset-3 paper">
	<p>Inspired by Kurt Vonnegut's <a href="https://www.youtube.com/watch?v=oP3c1h8v2ZQ">Shapes of Stories</a>.</p>
	<p>More details can also be found in our <a href="https://arxiv.org/abs/1606.07772" target="_blank">preprint</a> or the <a href="http://www.uvm.edu/storylab/share/papers/reagan2016b/index.html">online appendices</a> of our article <i>The emotional arcs of stories are composed of a hierarchy of basic shapes</i>.</p>
<!-- <p>What we aren’t doing: -->
<!-- <ol> -->
<!-- <li style="display: list-item !important">Finding the plots of novels (we do not conflate the emotional arc and the plot).</li> -->
<!-- <li>Using Fourier transforms.</li> -->
<!-- <li>Imposing a set of shapes. Rather: the math and machine learning have identified them.</li> -->
<!-- </ol> -->
<!-- </p> -->
      </div>

      <br>
  </div><!-- row -->

  </div><!-- /.container-fluid -->
</div><!-- /.container -->

<div class="modal" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 class="modal-title" id="modaltitle">Interactive Wordshift</h3>
      </div>
      <div class="modal-body" id="moveshifthere">
      </div>
      <div class="modal-footer" id="moveshiftherefooter">
        <div class="addthis_sharing_toolbox pull-left"></div>

        <button class="btn btn-primary" type="button" id="embedbutton" style="margin-right: 15px;" data-toggle="modal" href="#myModal2">Embed</button>

        </div>
    </div>
    
  </div>

  
  </div>
</div>


<!-- <div class="paper paper-curl-right"> -->
<!--   <b>Word Shift:</b> -->
<!--   <div id="figure01" class="figure"> -->
<!--     <p class="sumtext"></p> -->
<!--     <p class="sumtext"></p> -->
<!--     <p class="sumtext"></p> -->
<!--   </div> <\!-- figure -\-> -->
<!-- </div> <\!-- paper -\-> -->
{% endblock %}

{% block bottomjs %}
    <script src="{% static "hedonometer/js/d3.js" %}"></script>
    <script src="{% static "hedonometer/js/jquery-1.11.0.min.js" %}"></script>
    <script src="{% static "hedonometer/js/bootstrap.js" %}"></script>
    <script src="{% static "hedonometer/js/typeahead.bundle.js" %}"></script>
    <script src="{% static "hedonometer/js/urllib.js" %}"></script>
    <script src="{% static "hedonometer/js/hedotools.init.js" %}"></script>
    <script src="{% static "hedonometer/js/hedotools.shifter.js" %}"></script>
    <script src="{% static "hedonometer/js/drawLens-chapters.js" %}"></script>
    <script src="{% static "hedonometer/js/drawBookTimeseries-harry.js" %}"></script>
    <script src="{% static "hedonometer/js/selectChapter-harry.js" %}"></script>
    <script src="{% static "hedonometer/js/selectChapterTop-harry.js" %}"></script>
    <script src="{% static "hedonometer/js/computeHappsChapters.js" %}"></script>
    <script src="{% static "hedonometer/js/books-on-load-harry.js" %}"></script>
    <script src="{% static "hedonometer/js/spin.js" %}"></script>
{% endblock %}



